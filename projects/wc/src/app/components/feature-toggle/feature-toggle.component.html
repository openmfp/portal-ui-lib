<div class="container">
  <div class="explanation-container">
    <div class="explanation">
      The following setting allows you to enable or disable features. For more information about feature toggles, please follow the link:
    </div>
    <ui5-link
      class="explanation"
      target="_blank"
      href="https://github.com/openmfp/portal-ui-lib/blob/main/docs/readme-nodes-configuration.md#feature-toggles"
      >Feature Toggles Documentation</ui5-link>
  </div>
  <div>
    <ui5-label class="label" for="input-new-toggle" show-colon>
      Feature Toggle Name
    </ui5-label>
    <div class="new-toggle-input">
      <ui5-input class="input" id="input-new-toggle" placeholder="myToggle" [formControl]="newToggleControl"></ui5-input>
      <ui5-button [disabled]="newToggleControl.invalid" design="Emphasized" (ui5Click)="addToggle()">Add Toggle</ui5-button>
      <ui5-button [disabled]="!newToggleControl.value" (ui5Click)="clear()">Clear</ui5-button>
    </div>
  </div>

  <ui5-list class="toggle-list" [formGroup]="togglesForm">
    @for (toggle of togglesForm.controls | keyvalue; track toggle.key; let ind = $index) {
      <ui5-li-custom>
        <div class="toggle-item">
          <span>
            {{ toggle.key }}
          </span>
          <div class="toggle-item-buttons">
            @let isQueryParamFeature = queryParamsFeatures.includes(toggle.key);
            <ui5-switch [tooltip]="isQueryParamFeature ? 'Feature toggle is enabled by query parameter' : ''" [disabled]="isQueryParamFeature" [formControlName]="toggle.key"></ui5-switch>
            <ui5-button [tooltip]="isQueryParamFeature ? 'Feature toggle is enabled by query parameter' : ''" [disabled]="isQueryParamFeature" (ui5Click)="onItemDelete(toggle.key)"  design="Transparent" icon="decline"></ui5-button>
          </div>
        </div>
      </ui5-li-custom>
    }
  </ui5-list>
</div>
